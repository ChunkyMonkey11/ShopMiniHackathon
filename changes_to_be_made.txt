import {Button, Avatar, AvatarImage, AvatarFallback, Touchable, Card, CardContent} from '@shopify/shop-minis-react'
import {useCallback} from 'react'

// Mock data for stories
const mockStories = [
  { id: 1, username: 'sarah_style', profilePic: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face', viewed: false },
  { id: 2, username: 'mike_fashion', profilePic: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face', viewed: true },
  { id: 3, username: 'emma_trends', profilePic: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face', viewed: false },
  { id: 4, username: 'alex_outfit', profilePic: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face', viewed: true },
  { id: 5, username: 'jess_style', profilePic: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face', viewed: false },
  { id: 6, username: 'david_look', profilePic: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face', viewed: true },
  { id: 7, username: 'lisa_fashion', profilePic: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face', viewed: false },
]

// Mock data for user cards
const mockUserCards = [
  {
    id: 1,
    username: 'sarah_style',
    profilePic: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face',
    stylePreviews: [
      'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=80&h=80&fit=crop'
    ]
  },
  {
    id: 2,
    username: 'mike_fashion',
    profilePic: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
    stylePreviews: [
      'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=80&h=80&fit=crop'
    ]
  },
  {
    id: 3,
    username: 'emma_trends',
    profilePic: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face',
    stylePreviews: [
      'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=80&h=80&fit=crop'
    ]
  },
  {
    id: 4,
    username: 'alex_outfit',
    profilePic: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
    stylePreviews: [
      'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=80&h=80&fit=crop'
    ]
  },
  {
    id: 5,
    username: 'jess_style',
    profilePic: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face',
    stylePreviews: [
      'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=80&h=80&fit=crop',
      'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=80&h=80&fit=crop'
    ]
  }
]

export function App() {
  // Friend-focused shell only; self-related feeds removed
  const handleInviteFriends = useCallback(() => {
    console.log('Invite friends clicked')
  }, [])

  const handleStoryTap = useCallback((storyId: number) => {
    console.log('Story tapped:', storyId)
  }, [])

  const handleUserCardTap = useCallback((userId: number) => {
    console.log('User card tapped:', userId)
  }, [])

  return (
    <div className="pt-12 pb-6">
      {/* Stories Section */}
      <div className="px-4 mb-6">
        <h2 className="text-lg font-semibold mb-3 text-gray-800">Style Stories</h2>
        <div className="flex space-x-3 overflow-x-auto pb-2 scrollbar-hide">
          {mockStories.map((story) => (
            <Touchable key={story.id} onClick={() => handleStoryTap(story.id)}>
              <div className="flex flex-col items-center space-y-1 flex-shrink-0">
                <div className={`w-16 h-16 rounded-full p-0.5 ${story.viewed ? 'bg-gray-300' : 'bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500'}`}>
                  <div className="w-full h-full rounded-full overflow-hidden bg-white p-0.5">
                    <Avatar className="w-full h-full">
                      <AvatarImage src={story.profilePic} alt={`${story.username}'s story`} />
                      <AvatarFallback>{story.username.charAt(0).toUpperCase()}</AvatarFallback>
                    </Avatar>
                  </div>
                </div>
                <span className="text-xs text-gray-600 truncate max-w-16 text-center">
                  {story.username}
                </span>
              </div>
            </Touchable>
          ))}
        </div>
      </div>

      {/* User Cards Section - Vertical Scrolling */}
      <div className="px-4 mb-6">
        <h2 className="text-lg font-semibold mb-3 text-gray-800">Friends' Style</h2>
        <div className="space-y-3">
          {mockUserCards.map((user) => (
            <Touchable key={user.id} onClick={() => handleUserCardTap(user.id)}>
              <Card className="w-full hover:shadow-md transition-shadow duration-200">
                <CardContent className="p-4">
                  {/* Profile Section */}
                  <div className="flex flex-col items-center mb-4">
                    <Avatar className="w-16 h-16 mb-2">
                      <AvatarImage src={user.profilePic} alt={user.username} />
                      <AvatarFallback>{user.username.charAt(0).toUpperCase()}</AvatarFallback>
                    </Avatar>
                    <p className="text-sm font-medium text-gray-900 truncate max-w-32 text-center">
                      {user.username}
                    </p>
                  </div>

                  {/* Style Preview Grid - 2x2 */}
                  <div className="grid grid-cols-2 gap-2">
                    {user.stylePreviews.map((preview, index) => (
                      <div key={index} className="aspect-square bg-gray-100 rounded overflow-hidden">
                        <img 
                          src={preview} 
                          alt={`Style preview ${index + 1}`}
                          className="w-full h-full object-cover"
                        />
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </Touchable>
          ))}
        </div>
      </div>

      {/* Main Content */}
      <div className="px-4">
        <h1 className="text-2xl font-bold mb-2 text-center">Friends' products</h1>
        <p className="text-sm text-gray-600 mb-6 text-center">
          Connect with friends to see products they choose to share.
        </p>

        {/* Empty state for friend feed before integration */}
        <div className="text-center text-gray-600 mt-6">
          <p className="mb-3">No friends connected yet.</p>
          <p className="text-sm mb-6">
            When friends opt in, their shared saved/recent products will appear here.
          </p>
          <div className="max-w-xs mx-auto">
            <Button onClick={handleInviteFriends}>Invite friends</Button>
          </div>
        </div>
      </div>
    </div>
  )
}



@import "@shopify/shop-minis-react/styles";

/* Custom styles for stories */
.scrollbar-hide {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Safari and Chrome */
}

/* Mobile optimization */
@media (max-width: 640px) {
  .stories-container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}